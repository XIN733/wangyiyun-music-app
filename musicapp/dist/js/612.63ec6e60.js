"use strict";(self["webpackChunkmusicapp"]=self["webpackChunkmusicapp"]||[]).push([[612],{1612:function(s,e,i){i.r(e),i.d(e,{default:function(){return V}});var a=i(6252);const t={id:"searchPage"};function r(s,e,i,r,o,l){const n=(0,a.up)("search-top");return(0,a.wg)(),(0,a.iD)("div",t,[(0,a.Wm)(n)])}var o=i(9963),l=i(3577);const n={class:"searchTop"},c={class:"searchTopNav"},d=(0,a._)("svg",{class:"icon","aria-hidden":"true"},[(0,a._)("use",{"xlink:href":"#icon-zuojiantou"})],-1),h=[d],y={class:"search-box"},w=["placeholder"],u={class:"history"},g={class:"historyLeft"},v=(0,a._)("div",{class:"label"},"历史",-1),k={class:"keywordList"},_=["onClick"],p=(0,a._)("svg",{class:"icon","aria-hidden":"true"},[(0,a._)("use",{"xlink:href":"#icon-lajitong"})],-1),f=[p],L={class:"playList"},m={class:"playList-top"},K={class:"left"},x=(0,a._)("svg",{class:"icon","aria-hidden":"true"},[(0,a._)("use",{"xlink:href":"#icon-yunhang"})],-1),C={class:"text"},S=(0,a._)("span",{class:"title"},"播放全部",-1),D={class:"num"},b={class:"list"},z={class:"left"},P={class:"index"},W={class:"content"},$={class:"title line"},I={class:"author"},J={class:"text line"},N={class:"right"},T=["onClick"],j=(0,a._)("use",{"xlink:href":"#icon-bofangshu"},null,-1),E=[j],F=(0,a._)("svg",{class:"icon more","aria-hidden":"true"},[(0,a._)("use",{"xlink:href":"#icon-diandiandianshu"})],-1);function H(s,e,i,t,r,d){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",c,[(0,a._)("div",{class:"black",onClick:e[0]||(e[0]=e=>s.$router.go(-1))},h),(0,a._)("div",y,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>r.searchKeyword=s),placeholder:r.placeholder,onKeydown:e[2]||(e[2]=(0,o.D2)(((...s)=>d.saveKeyWord&&d.saveKeyWord(...s)),["enter"]))},null,40,w),[[o.nr,r.searchKeyword]])])]),(0,a.wy)((0,a._)("div",u,[(0,a._)("div",g,[v,(0,a._)("div",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.keywordList,((s,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"keyItem",key:e,onClick:e=>d.setSearchKeyword(s)},(0,l.zw)(s),9,_)))),128))])]),(0,a._)("div",{class:"historyRight",onClick:e[3]||(e[3]=(...s)=>d.clearKeywordList&&d.clearKeywordList(...s))},f)],512),[[o.F8,r.keywordList.length>0]]),(0,a.wy)((0,a._)("div",L,[(0,a._)("div",m,[(0,a._)("div",K,[x,(0,a._)("div",C,[S,(0,a._)("span",D,"(共"+(0,l.zw)(r.songs.length)+"首)",1)])])]),(0,a._)("div",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.songs,((s,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"playItem",key:e},[(0,a._)("div",z,[(0,a._)("div",P,(0,l.zw)(e+1),1),(0,a._)("div",W,[(0,a._)("div",$,(0,l.zw)(s.name),1),(0,a._)("div",I,[(0,a._)("span",J,(0,l.zw)(s.ar[0].name)+"-"+(0,l.zw)(s.name),1)])])]),(0,a._)("div",N,[((0,a.wg)(),(0,a.iD)("svg",{class:"icon play","aria-hidden":"true",onClick:e=>d.setPlay(s)},E,8,T)),F])])))),128))])],512),[[o.F8,r.songs.length>0]])])}var O=i(7877),Y={data(){return{placeholder:"陈奕迅",searchKeyword:"",keywordList:[],songs:[]}},beforeMount(){this.keywordList=localStorage.keywordList?JSON.parse(localStorage.keywordList):[]},methods:{async saveKeyWord(){if(this.searchKeyword.trim()){this.keywordList.unshift(this.searchKeyword.trim()),this.keywordList=Array.from(new Set(this.keywordList)),this.keywordList.length>10&&(this.keywordList=this.keywordList.slice(0,10)),localStorage.keywordList=JSON.stringify(this.keywordList);let s=await(0,O.ao)(this.searchKeyword);if(s.data.result.songs){let e="";s.data.result.songs.forEach(((s,i)=>{e+=0==i?s.id:","+s.id}));let i=await(0,O.KJ)(e);i.data.songs.forEach(((s,e)=>{s.al.name=s.name})),this.songs=i.data.songs}else this.songs=[]}},clearKeywordList(){this.keywordList=[],localStorage.keywordList=[]},setSearchKeyword(s){this.searchKeyword=s,this.saveKeyWord()},async setPlay(s){this.$store.commit("pushPlayList",s),this.$store.commit("setPlayCurrentIndex",this.$store.state.playlist.length-1)}}},Z=i(3744);const A=(0,Z.Z)(Y,[["render",H]]);var M=A,R={components:{searchTop:M}};const U=(0,Z.Z)(R,[["render",r]]);var V=U}}]);
//# sourceMappingURL=612.63ec6e60.js.map